var MultiRecorderWidget = function(stream, sendCb) {
	this.recorderWidget = new RecorderWidget(stream, sendCb );
	this.listingRecorderWidget = new ListingRecorderWidget(stream, sendCb );
	this.listingEditor = new ListingEditorWidget();
	
	this.node = document.createElement("div");
	this.recorderNode = document.createElement("div");
	this.init();
};

MultiRecorderWidget.prototype.setContent = function(node) {
	while (this.recorderNode.firstChild) this.recorderNode.removeChild(this.recorderNode.firstChild);
	this.recorderNode.appendChild(node);
};

MultiRecorderWidget.prototype.createMenu = function() {
	var self = this;
	var ul = document.createElement("ul");
	ul.className = "tabs";

	var li = document.createElement("li");
	li.appendChild(document.createTextNode("Manual registration"));
	li.onclick = function() { self.setContent(self.recorderWidget.node) };
	ul.appendChild(li);

	var li = document.createElement("li");
	li.appendChild(document.createTextNode("Registration by listing"));
	li.onclick = function() { self.setContent(self.listingEditor.node) };
	ul.appendChild(li);

	return ul;
};

MultiRecorderWidget.prototype.init = function() {
	var self = this;

	this.node.className = "multiRecorder";
	this.node.appendChild(this.createMenu());
	this.node.appendChild(this.recorderNode);
	
	//--Manual mode
	this.setContent(this.recorderWidget.node);

	//--listing
	this.listingEditor.setList(["angle","armoire","banc","bureau","cabinet","carreau","chaise","classe","cl\u00e9","coin","couloir","dossier","eau","\u00e9cole","\u00e9criture","entr\u00e9e","escalier","\u00e9tag\u00e8re","\u00e9tude","ext\u00e9rieur","fen\u00eatre","int\u00e9rieur","lavabo","lecture","lit","marche","matelas","maternelle","meuble","mousse","mur","peluche","placard","plafond","porte","portemanteau","poubelle","radiateur","rampe","r\u00e9cr\u00e9ation","rentr\u00e9e","rideau","robinet","salle","savon","serrure","serviette","si\u00e8ge","sieste","silence","sol","sommeil","sonnette","sortie","table","tableau","tabouret","tapis","tiroir","toilette","vitre","w.-c.","aller","amener","apporter","appuyer","s\u2019asseoir","attendre","b\u00e2iller","bosser","se coucher","dormir","\u00e9clairer","\u00e9crire","emmener","emporter","s\u2019endormir","s\u2019ennuyer","entrer","\u00e9tudier","fermer","frapper","s\u2019installer","se lever","lire","ouvrir","se presser","se r\u00e9chauffer","rentrer","se reposer","rester","se r\u00e9veiller","sonner","sortir","tricher","venir","absent","assis","bas","couch\u00e9","haut","pr\u00e9sent","\u00e0 c\u00f4t\u00e9","\u00e0 droite","\u00e0 gauche","au milieu","au-del\u00e0","au-dessous","au-dessus","debout","dedans","dehors","en bas","en face","en haut","loin","pr\u00e8s","tard","t\u00f4t","\u00e0","apr\u00e8s","au","avant","contre","dans","de","derri\u00e8re","devant","du","sous","sur","crayon","stylo","feutre","taille-crayon","pointe","mine","gomme","dessin","coloriage","rayure","peinture","pinceau","couleur","craie","papier","feuille","cahier","carnet","carton","ciseaux","d\u00e9coupage","pliage","pli","colle","affaire","bo\u00eete","casier","caisse","trousse","cartable","jouet","jeu","pion","d\u00e9","domino","puzzle","cube","perle","chose","rond","p\u00e2te \u00e0 modeler","tampon","livre","histoire","biblioth\u00e8que","image","album","titre","bande dessin\u00e9e","conte","dictionnaire","magazine","catalogue","page","ligne","mot","enveloppe","\u00e9tiquette","alphabet","appareil","cam\u00e9scope","cassette","c\u00e9d\u00e9","c\u00e9d\u00e9rom","cha\u00eene","chanson","chiffre","contraire","diff\u00e9rence","doigt","\u00e9cran","film","fois","id\u00e9e","instrument","intrus","lettre","liste","magn\u00e9toscope","main","micro","mod\u00e8le","musique","nom","nombre","orchestre","ordinateur","photo","point","poster","pouce","pr\u00e9nom","question","radio","sens","tambour","t\u00e9l\u00e9commande","t\u00e9l\u00e9phone","t\u00e9l\u00e9vision","trait","trompette","voix","xylophone","z\u00e9ro","chanter","chercher","choisir","chuchoter","coller","colorier","commencer","comparer","compter","construire","continuer","copier","couper","d\u00e9chirer","d\u00e9coller","d\u00e9corer","d\u00e9couper","demander","d\u00e9molir","se d\u00e9p\u00eacher","dessiner","dire","discuter","\u00e9couter","effacer","entendre","entourer","envoyer","faire","finir","fouiller","go\u00fbter","imiter","laisser","mettre","montrer","ouvrir un livre","parler","peindre","plier","poser","prendre","pr\u00e9parer","ranger","r\u00e9citer","recommencer","regarder","remettre","r\u00e9p\u00e9ter","r\u00e9pondre","sentir","souligner","tailler","se taire","tenir","terminer","toucher","travailler","trier","ami","attention","camarade","col\u00e8re","copain","coquin","dame","directeur","directrice","droit","effort","\u00e9l\u00e8ve","enfant","fatigue","faute","fille","gar\u00e7on","gardien","madame","ma\u00eetre","ma\u00eetresse","mensonge","ordre","personne","retard","sourire","travail","aider","d\u00e9fendre","d\u00e9sob\u00e9ir","distribuer","\u00e9changer","s\u2019excuser","expliquer","se f\u00e2cher","gronder","ob\u00e9ir","obliger","partager","pr\u00eater","priver","promettre","punir","se quitter","raconter","refuser","s\u00e9parer","blond","brun","calme","curieux","diff\u00e9rent","doux","\u00e9nerv\u00e9","gentil","grand","handicap\u00e9","ins\u00e9parable","jaloux","moyen","muet","noir","nouveau","petit","poli","propre","roux","sage","sale","s\u00e9rieux","sourd","tranquille","les jeux","arrosoir","assiette","balle","bateau","bouchon","bouteille","bulles","canard","casserole","cuill\u00e8re","cuvette","douche","entonnoir","gouttes","litre","moulin","pluie","poisson","pont","pot","roue","sac en plastique","saladier","seau","tablier","tasse","trous","verre","agiter","s\u2019amuser","arroser","attraper","avancer","baigner","barboter","boucher","bouger","d\u00e9border","doucher","\u00e9clabousser","essuyer","flotter","gonfler","inonder","jouer","laver","m\u00e9langer","mouiller","nager","patauger","pleuvoir","plonger","pousser","pouvoir","presser","recevoir","remplir","renverser","s\u00e9cher","serrer","souffler","tirer","tourner","tremper","verser","vider","vouloir","amusant","chaud","froid","humide","int\u00e9ressant","mouill\u00e9","sec","transparent","\u00e0 moiti\u00e9","autant","beaucoup","encore","moins","peu","plus","trop","\u00e0 l\u2019endroit","\u00e0 l\u2019envers","anorak","arc","bagage","baguette","barbe","bonnet","botte","bouton","bretelle","cagoule","casque","casquette","ceinture","chapeau","chaussette","chausson","chaussure","chemise","cigarette","col","collant","couronne","cravate","culotte","\u00e9charpe","\u00e9p\u00e9e","f\u00e9e","fl\u00e8che","fusil","gant","habit","jean","jupe","lacet","laine","linge","lunettes","magicien","magie","maillot","manche","manteau","mouchoir","moufle","n\u0153ud","paire","pantalon","pied","poche","prince","pull-over","pyjama","reine","robe","roi","ruban","semelle","soldat","sorci\u00e8re","tache","taille","talon","tissu","tricot","uniforme","valise","veste","v\u00eatement","se changer","se chausser","se couvrir","se d\u00e9guiser","se d\u00e9shabiller","enlever","s\u2019habiller","lacer","porter","ressembler","clair","court","\u00e9troit","fonc\u00e9","joli","large","long","multicolore","nu","us\u00e9","bien","mal","mieux","presque","aiguille","ampoule","avion","bois","bout","bricolage","bruit","cabane","clou","crochet","\u00e9lastique","ficelle","fil","marionnette","marteau","m\u00e9tal","m\u00e8tre","morceau","moteur","objet","outil","planche","pl\u00e2tre","scie","tournevis","vis","voiture","v\u00e9hicule","arracher","attacher","casser","coudre","d\u00e9truire","s\u2019\u00e9corcher","enfiler","enfoncer","fabriquer","mesurer","percer","se pincer","r\u00e9parer","r\u00e9ussir","servir","taper","trouer","adroit","difficile","dur","facile","lisse","maladroit","pointu","rugueux","tordu","accident","a\u00e9roport","auto","camion","engin","feu","frein","fus\u00e9e","garage","gare","grue","h\u00e9licopt\u00e8re","moto","panne","parking","pilote","pneu","quai","train","virage","vitesse","voyage","wagon","zigzag","s\u2019arr\u00eater","atterrir","bouder","charger","conduire","d\u00e9marrer","dispara\u00eetre","donner","\u00e9craser","s\u2019envoler","garder","se garer","manquer","partir","se poser","reculer","rouler","tendre","transporter","voler","ab\u00eem\u00e9","ancien","blanc","bleu","cass\u00e9","cinq","dernier","deux","deuxi\u00e8me","dix","gris","gros","huit","jaune","m\u00eame","neuf","pareil","premier","quatre","rouge","sept","seul","six","solide","trois","troisi\u00e8me","un","vert","autour","vite","\u00e0 c\u00f4t\u00e9 de","au milieu de","au-dessous de","au-dessus de","autour de","avec","en bas de","en haut de","loin de","pr\u00e8s de","vers","acrobate","arr\u00eat","arri\u00e8re","barre","barreau","bord","bras","cerceau","chaises","cheville","chute","c\u0153ur","corde","corps","c\u00f4t\u00e9","cou","coude","cuisse","danger","doigts","dos","\u00e9chasses","\u00e9chelle","\u00e9paule","\u00e9quipe","escabeau","fesse","filet","fond","genou","gymnastique","hanche","jambes","mains","milieu","montagne","mur d\u2019escalade","muscle","num\u00e9ro","ongle","parcours","pas","passerelle","pente","peur","pieds","plongeoir","poignet","poing","pont de singe","prises","roulade","saut","serpent","sport","suivant","t\u00eate","toboggan","tour","trampoline","tunnel","ventre","s\u2019accrocher","s\u2019appuyer","arriver","se baisser","se balancer","bondir","bousculer","se cogner","courir","danser","d\u00e9passer","descendre","\u00e9carter","escalader","gagner","g\u00eaner","glisser","grimper","marcher \u00e0 quatre pattes","marcher sur","se mettre debout","monter","se pencher","se percher","perdre","ramper","rater","remplacer","respirer","se retourner","revenir","sauter","soulever","suivre","tomber","transpirer","traverser","dangereux","\u00e9pais","fort","gauche","group\u00e9","immobile","serr\u00e9","souple","au del\u00e0","ensemble","ici","jamais","l\u00e0","souvent","toujours","bagarre","balan\u00e7oire","ballon","bande","bicyclette","bille","cadenas","cage \u00e0 \u00e9cureuil","cerf-volant","ch\u00e2teau","coup","cour","course","\u00e9chasse","flaque","paix","pardon","partie","p\u00e9dale","pelle","pompe","pr\u00e9au","raquette","rayon","sable","sifflet","signe","tas","tricycle","tuyau","v\u00e9lo","se bagarrer","se battre","se cacher","cracher","creuser","crier","se d\u00e9gonfler","se disputer","emp\u00eacher","galoper","hurler","jongler","lancer","p\u00e9daler","se plaindre","pleurer","poursuivre","prot\u00e9ger","saigner","se salir","siffler","surveiller","tra\u00eener","trouver","cach\u00e9","fou","m\u00e9chant","allumette","anniversaire","app\u00e9tit","beurre","coquille","cr\u00eapes","cro\u00fbte","dessert","envie","faim","f\u00e8ve","four","galette","g\u00e2teau","go\u00fbt","invitation","langue","l\u00e8vres","liquide","louche","mie","moiti\u00e9","moule","odeur","\u0153uf","part","p\u00e2te","p\u00e2tisserie","recette","rouleau","sel","soif","tarte","tranche","yaourt","aimer","allumer","avaler","battre","se br\u00fbler","chauffer","cuire","\u00e9taler","\u00e9teindre","falloir","inviter","jeter","l\u00e9cher","oublier","se r\u00e9galer","remercier","remuer","souhaiter","sucer","barbouill\u00e9","demi","\u00e9gal","entier","gourmand","mauvais","meilleur","mince","gla\u00e7on","jus","kiwi","lame","m\u00fbre","noyau","paille","pamplemousse","r\u00e2pe","croquer","\u00e9plucher","r\u00e2per","bassine","cocotte","\u00e9pluchure","l\u00e9gume","pomme de terre","rondelle","soupe","consomm\u00e9","potage","bouillir","mixer","cru","cuit","vide","ar\u00eate","femme","frite","gobelet","jambon","os","poulet","pur\u00e9e","radis","restaurant","sole","d\u00e9jeuner","animal","b\u00e9b\u00e9s","bouche","cage","c\u00e2lin","caresse","cochon d\u2019Inde","foin","graines","hamster","lapin","maison","nez","\u0153il","oreille","patte","toit","yeux","accoucher","agacer","appeler","c\u00e2liner","caresser","changer","d\u00e9ranger","s\u2019\u00e9chapper","\u00e9lever","enfermer","enterrer","gratter","grignoter","installer","l\u00e2cher","mordre","mourir","na\u00eetre","nourrir","s\u2019occuper de","se promener","ronger","se sauver","soigner","t\u00e9ter","vivre","voir","abandonn\u00e9","enceinte","maigre","mort","n\u00e9","vivant","abeille","agneau","aile","\u00e2ne","arbre","bain","barque","bassin","b\u00e9b\u00e9","bec","b\u00eate","b\u0153uf","botte de foin","boue","bouquet","bourgeon","branche","caillou","campagne","car","champ","chariot","chat","chemin\u00e9e","cheval","ch\u00e8vre","chien","cochon","colline","coq","coquelicot","crapaud","cygne","d\u00e9part","dindon","escargot","\u00e9tang","ferme","fermier","flamme","fleur","fontaine","fum\u00e9e","grain","graine","grenouille","griffe","gu\u00eape","herbe","h\u00e9risson","insecte","jardin","mare","marguerite","miel","morceau de pain","mouche","mouton","oie","oiseau","pierre","pigeon","plante","plume","poney","poule","poussin","prairie","rat","rivi\u00e8re","route","tortue","tracteur","tulipe","vache","v\u00e9t\u00e9rinaire","accompagner","se baigner","courir apr\u00e8s","couver","donner \u00e0 manger","faire boire","fumer","griffer","habiter","piquer","ramasser","traire","bizarre","\u00e9norme","immense","malade","nain","utile","aigle","animaux","aquarium","b\u00eates","cerf","chouette","cigogne","crocodile","dauphin","\u00e9l\u00e9phant","girafe","hibou","hippopotame","kangourou","lion","loup","ours","panda","panth\u00e8re","perroquet","phoque","renard","requin","rhinoc\u00e9ros","singe","tigre","z\u00e8bre","zoo","\u00e9pingle","b\u00e2ton","b\u00eatise","bonhomme","bottes","canne","cauchemar","cri","danse","d\u00e9guisement","dinosaure","drapeau","en argent","en or","en rang","f\u00eate","figure","g\u00e9ant","gens","grand-m\u00e8re","grand-p\u00e8re","joie","joue","journaux","maquillage","masque","monsieur","moustache","ogre","princesse","rue","trottoir","d\u00e9guiser","d\u00e9filer","\u00e9clater","essayer","marcher","se moquer","plaire","rencontrer","ressembler \u00e0","retourner","r\u00eaver","rire","taper sur","content","dr\u00f4le","effray\u00e9","heureux","joyeux","pr\u00eat","riche","terrible","No\u00ebl","boule","cadeau","canne \u00e0 p\u00eache","chance","guirlande","humeur","papillon","spectacle","surprise","trou","visage","faire peur","lever","maquiller","\u00e9lectrique","\u00e2ge","an","ann\u00e9e","apr\u00e8s-midi","calendrier","d\u00e9but","dimanche","\u00e9t\u00e9","\u00e9toile","fin","heure","hiver","horloge","jeudi","jour","journ\u00e9e","lumi\u00e8re","lundi","lune","mardi","matin","mercredi","midi","minuit","minute","mois","moment","montre","nuit","ombre","pendule","retour","r\u00e9veil","saison","samedi","semaine","soir","soleil","temps","univers","vacances","vendredi","briller","d\u00eener","grandir","mettre du temps","retarder","a\u00een\u00e9","jeune","lent","patient","rapide","sombre","vieux","aujourd\u2019hui","bient\u00f4t","d\u2019abord","demain","hier","maintenant","puis","tout de suite","en avance (loc.)","en retard (loc.)","La m\u00e9t\u00e9o","air","arc-en-ciel","brouillard","ciel","\u00e9clair","flocon","goutte","hirondelle","luge","neige","nuage","orage","ouragan","parapluie","parasol","ski","temp\u00eate","thermom\u00e8tre","tonnerre","tra\u00eeneau","vent","s\u2019abriter","faire beau","geler","se mouiller","neiger","se tromper","venter","d\u00e9\u00e7u","triste","pluvieux","nuageux","gel\u00e9","instable","changeant,","balai","biscuit","boisson","bol","bonbon","c\u00e9r\u00e9ale","confiture","coquetier","couteau","couvercle","couvert","cuisine","cuisini\u00e8re","d\u00e9sordre","d\u00eenette","\u00e9ponge","\u00e9vier","fourchette","lait","lave-linge","lessive","machine","nappe","pain","pile","plat","plateau","po\u00eale","r\u00e9frig\u00e9rateur","repas","tartine","torchon","vaisselle","accrocher","balayer","boire","frotter","manger","nettoyer","se servir","cuisiner","bon","creux","d\u00e9licieux","argent","aspirateur","bague","barrette","bijou","bracelet","brosse","cadre","canap\u00e9","chambre","cheveu","chiffon","cil","coffre","coffret","collier","couette","coussin","couverture","dent","dentifrice","drap","fauteuil","fer \u00e0 repasser","frange","glace","lampe","m\u00e9nage","or","oreiller","parfum","peigne","pouf","poup\u00e9e","poussette","poussi\u00e8re","shampoing","sourcil","tr\u00e9sor","tube","vase","s\u2019allonger","se coiffer","h\u00e9siter","se laver","se maquiller","passer","pr\u00e9f\u00e9rer","repasser","se s\u00e9cher","secouer","t\u00e9l\u00e9phoner","beau","belle","confortable","coquet","douillet","adulte","amour","baiser","bavoir","biberon","bisou","caprice","cimeti\u00e8re","cousin","cousine","cr\u00e8che","fils","fr\u00e8re","grand-parent","homme","jumeau","maman","mari","mariage","m\u00e8re","papa","parent","p\u00e8re","petit-enfant","petit-fils","petite-fille","rasoir","s\u0153ur","s\u2019agiter","s\u2019appeler","baver","bercer","se blottir","consoler","d\u00e9m\u00e9nager","se d\u00e9tester","s\u2019embrasser","se marier","offrir","penser","se rappeler","se raser","ronfler","se serrer","tricoter","un accident","la maladie","ambulance","bosse","champignon","dentiste","docteur","fi\u00e8vre","front","gorge","infirmier","infirmi\u00e8re","jambe","larme","m\u00e9decin","menton","ordonnance","pansement","peau","piq\u00fbre","poison","sang","sant\u00e9","squelette","aller bien","attraper une maladie","se blesser","d\u00e9tester","devoir","\u00e9ternuer","se gratter","gu\u00e9rir","se moucher","ne pas oublier","se prot\u00e9ger","recoudre","souffrir","t\u00e2ter","tousser","trembler","gu\u00e9ri","p\u00e2le","araign\u00e9e","brouette","chenille","coccinelle","fourmi","jonquille","l\u00e9zard","p\u00e2querette","rang\u00e9e","r\u00e2teau","ros\u00e9","souris","taupe","terrain","terre","terrier","tige","ver","cueillir","jardiner","se faner","s\u2019ouvrir","planter","m\u00fbr","profond","assez","porti\u00e8re","sac","voyager","billet","farce","grimace","grotte","pays","regard","ticket","se doucher","tuer","cruel","b\u00fbche","buisson","camp","chasseur","ch\u00e2taigne","chemin","ch\u00eane","corbeau","\u00e9corce","\u00e9cureuil","for\u00eat","gourde","lac","loupe","lutin","marron","moustique","muguet","nid","paysage","pin","rocher","sapin","sommet","tente","camper","chasser","s\u2019\u00e9loigner","griller","guetter","s\u2019imaginer","se perdre","photographier","pique-niquer","revoir","adresse","appartement","ascenseur","balcon","boucherie","boulanger","boulangerie","boutique","bus","caniveau","caravane","carrefour","cave","charcuterie","cin\u00e9ma","cirque","clin d\u2019\u0153il","cloche","clocher","clown","coiffeur","colis-route","courrier","croix","\u00e9glise","embouteillage","endroit","essence","facteur","fleuriste","foire","h\u00f4pital","h\u00f4tel","immeuble","incendie","laisse","magasin","man\u00e8ge","m\u00e9dicament","moineau","monde","monument","ouvrier","palais","panneau","paquet","parc","passage","pharmacie","pharmacien","piscine","place","police","policier","pompier","poste","promenade","quartier","square","timbre","travaux","usine","village","ville","voisin","volet","barrer","clignoter","se croiser","garer","reconna\u00eetre","retrouver","saluer","savoir","se toucher","se trouver","visiter","important","impossible","prudent","abricot","ail","aliment","ananas","banane","bifteck","caf\u00e9","carotte","cerise","chocolat","chou","citron","citrouille","cl\u00e9mentine","concombre","coquillage","corbeille","crabe","crevette","endive","farine","fraise","framboise","fromage","fruit","haricot","huile","marchand","melon","monnaie","navet","noisette","noix","nourriture","oignon","orange","panier","p\u00e2tes","p\u00eache","persil","petit pois","poire","poireau","pomme","prix","prune","queue","raisin","riz","salade","sucre","th\u00e9","tomate","viande","vin","acheter","ajouter","co\u00fbter","payer","peser","rendre","vendre","cher","l\u00e9ger","lourd","plein","baleine","bou\u00e9e","\u00eele","jumelles","marin","mer","mouette","navire","p\u00eacheur","plage","port","sardine","vague","voile","se noyer","ramer"]);

	this.listingEditor.onsubmit = function(list) {
		self.listingRecorderWidget.setList(list);
		self.setContent(self.listingRecorderWidget.node);
	};
	this.listingRecorderWidget.showSound = function(sound) { if ("showSound" in self) self.showSound(sound) };
};
